{% extends "trading/base.html" %}

{% block title %}전략 설정{% endblock %}

{% block content %}
<div class="space-y-8 max-w-4xl mx-auto">
    <!-- 헤더 -->
    <div>
        <h1 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white">전략 설정</h1>
        <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">자동 트레이딩 시스템의 핵심 전략과 리스크 관리 규칙을 설정합니다.</p>
    </div>

    <!-- 성공/에러 메시지 -->
    {% if messages %}
        <div class="space-y-2">
        {% for message in messages %}
            <div class="p-4 rounded-md {% if message.tags == 'success' %}bg-green-50 text-green-700 dark:bg-green-900 dark:text-green-300{% else %}bg-red-50 text-red-700 dark:bg-red-900 dark:text-red-300{% endif %}" role="alert">
                <p class="font-bold">{% if message.tags == 'success' %}성공{% else %}에러{% endif %}</p>
                <p>{{ message }}</p>
            </div>
        {% endfor %}
        </div>
    {% endif %}

    <!-- 전략 설정 폼 -->
    <form action="{% url 'trading:strategy_settings' %}" method="post" class="space-y-6 bg-white dark:bg-gray-800 shadow-md rounded-lg p-8">
        {% csrf_token %}

        <div class="space-y-6">
            {% for field in form %}
            <div>
                <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 dark:text-gray-300">{{ field.label }}</label>
                <div class="mt-1">
                    {{ field }}
                </div>
                {% if field.help_text %}
                    <p class="mt-2 text-xs text-gray-500 dark:text-gray-400">{{ field.help_text|safe }}</p>
                {% endif %}
                {% for error in field.errors %}
                    <p class="mt-2 text-xs text-red-600 dark:text-red-400">{{ error }}</p>
                {% endfor %}
            </div>
            {% endfor %}
        </div>

        <div class="pt-5">
            <div class="flex justify-end">
                <button type="submit" class="w-full sm:w-auto inline-flex justify-center py-2 px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                    설정 저장
                </button>
            </div>
        </div>
    </form>
</div>

<style>
    /* 폼 필드 스타일링 */
    input[type="text"], input[type="number"], select, textarea {
        width: 100%;
        padding: 0.5rem 0.75rem;
        border-radius: 0.375rem;
        border: 1px solid #D1D5DB; /* gray-300 */
        background-color: #FFFFFF; /* white */
        color: #111827; /* gray-900 */
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
    }

    .dark input[type="text"], .dark input[type="number"], .dark select, .dark textarea {
        border-color: #4B5563; /* gray-600 */
        background-color: #374151; /* gray-700 */
        color: #F9FAFB; /* gray-50 */
    }

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #2563eb; /* primary-600 */
        box-shadow: 0 0 0 2px #93c5fd; /* ring-primary-300 */
    }
</style>
{% endblock %}